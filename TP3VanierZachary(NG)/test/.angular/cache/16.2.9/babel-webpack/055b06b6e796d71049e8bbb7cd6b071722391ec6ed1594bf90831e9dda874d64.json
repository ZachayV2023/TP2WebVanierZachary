{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../voyage-service.service\";\nimport * as i2 from \"@angular/forms\";\nexport class VoyageCreateComponent {\n  constructor(voyageService) {\n    this.voyageService = voyageService;\n    this.imagePreview = null;\n  }\n  onSubmit(form) {\n    if (!form.valid) {\n      // Handle invalid form in the UI, perhaps by displaying an error message\n      return;\n    }\n    // Construct a voyage object (adjust fields as necessary for your data model)\n    const voyageData = new FormData();\n    voyageData.append('title', form.value.title);\n    voyageData.append('public', form.value.public ? 'true' : 'false');\n    if (this.imagePreview) {\n      voyageData.append('image', this.imagePreview);\n    }\n    // Call the service to send the data to your backend\n    this.voyageService.createVoyage(voyageData).subscribe({\n      next: response => {\n        // Handle successful response, such as navigating to a new route\n        // or updating a list of voyages displayed to the user\n      },\n      error: error => {\n        // Handle error response, such as displaying an error message\n        console.error('Failed to create voyage', error);\n      }\n    });\n    // Reset the form after submission\n    form.reset();\n    this.imagePreview = null;\n  }\n  onImagePicked(event) {\n    const element = event.target;\n    const file = element.files?.item(0);\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.imagePreview = reader.result; // This should be the file, not the result\n      };\n\n      reader.onerror = error => {\n        // Provide user feedback about the file read error\n        console.error('Error occurred while reading the file', error);\n      };\n      reader.readAsDataURL(file); // Consider if you need to read as data URL or as a File\n    }\n  }\n  static #_ = this.ɵfac = function VoyageCreateComponent_Factory(t) {\n    return new (t || VoyageCreateComponent)(i0.ɵɵdirectiveInject(i1.VoyageService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VoyageCreateComponent,\n    selectors: [[\"app-voyage-create\"]],\n    decls: 19,\n    vars: 0,\n    consts: [[1, \"container\"], [3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"voyageTitle\"], [\"type\", \"text\", \"id\", \"voyageTitle\", \"name\", \"title\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"id\", \"voyagePublic\", \"name\", \"public\", \"ngModel\", \"\", 1, \"form-check-input\"], [\"for\", \"voyagePublic\", 1, \"form-check-label\"], [\"for\", \"voyageImage\"], [\"type\", \"file\", \"id\", \"voyageImage\", 1, \"form-control-file\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n    template: function VoyageCreateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Nouveau voyage\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"form\", 1, 2);\n        i0.ɵɵlistener(\"ngSubmit\", function VoyageCreateComponent_Template_form_ngSubmit_3_listener() {\n          i0.ɵɵrestoreView(_r1);\n          const _r0 = i0.ɵɵreference(4);\n          return i0.ɵɵresetView(ctx.onSubmit(_r0));\n        });\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n        i0.ɵɵtext(7, \"Titre du voyage\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelement(10, \"input\", 7);\n        i0.ɵɵelementStart(11, \"label\", 8);\n        i0.ɵɵtext(12, \"Voyage public\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 3)(14, \"label\", 9);\n        i0.ɵɵtext(15, \"T\\u00E9l\\u00E9charger une image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 10);\n        i0.ɵɵlistener(\"change\", function VoyageCreateComponent_Template_input_change_16_listener($event) {\n          return ctx.onImagePicked($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"button\", 11);\n        i0.ɵɵtext(18, \"Cr\\u00E9er\");\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm],\n    styles: [\".container[_ngcontent-%COMP%] {\\n    background: #fff;\\n    padding: 20px;\\n    border-radius: 8px;\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\\n    max-width: 400px;\\n    margin: 20px auto;\\n  }\\n  \\n  .form-group[_ngcontent-%COMP%] {\\n    margin-bottom: 15px;\\n  }\\n  \\n  .form-check[_ngcontent-%COMP%] {\\n    margin-bottom: 15px;\\n  }\\n  \\n  .form-control[_ngcontent-%COMP%] {\\n    border: 1px solid #ced4da;\\n    border-radius: 0.25rem;\\n    padding: 0.375rem 0.75rem;\\n  }\\n  \\n  .form-control-file[_ngcontent-%COMP%] {\\n    display: block;\\n    margin-top: 0.5rem;\\n  }\\n  \\n  .btn[_ngcontent-%COMP%] {\\n    background-color: #6c5ce7;\\n    color: white;\\n    padding: 10px 15px;\\n    border: none;\\n    border-radius: 4px;\\n    cursor: pointer;\\n  }\\n  \\n  .btn[_ngcontent-%COMP%]:hover {\\n    background-color: #5a4cb1;\\n  }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdm95YWdlLWNyZWF0ZS92b3lhZ2UtY3JlYXRlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxnQkFBZ0I7SUFDaEIsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQix3Q0FBd0M7SUFDeEMsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixzQkFBc0I7SUFDdEIseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsY0FBYztJQUNkLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQiIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xyXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDRweCA2cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gICAgbWF4LXdpZHRoOiA0MDBweDtcclxuICAgIG1hcmdpbjogMjBweCBhdXRvO1xyXG4gIH1cclxuICBcclxuICAuZm9ybS1ncm91cCB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gIH1cclxuICBcclxuICAuZm9ybS1jaGVjayB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gIH1cclxuICBcclxuICAuZm9ybS1jb250cm9sIHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjZWQ0ZGE7XHJcbiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtO1xyXG4gICAgcGFkZGluZzogMC4zNzVyZW0gMC43NXJlbTtcclxuICB9XHJcbiAgXHJcbiAgLmZvcm0tY29udHJvbC1maWxlIHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgbWFyZ2luLXRvcDogMC41cmVtO1xyXG4gIH1cclxuICBcclxuICAuYnRuIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM2YzVjZTc7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDE1cHg7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIC5idG46aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzVhNGNiMTtcclxuICB9XHJcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["VoyageCreateComponent","constructor","voyageService","imagePreview","onSubmit","form","valid","voyageData","FormData","append","value","title","public","createVoyage","subscribe","next","response","error","console","reset","onImagePicked","event","element","target","file","files","item","reader","FileReader","onload","result","onerror","readAsDataURL","_","i0","ɵɵdirectiveInject","i1","VoyageService","_2","selectors","decls","vars","consts","template","VoyageCreateComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","VoyageCreateComponent_Template_form_ngSubmit_3_listener","ɵɵrestoreView","_r1","_r0","ɵɵreference","ɵɵresetView","ɵɵelement","VoyageCreateComponent_Template_input_change_16_listener","$event"],"sources":["C:\\Users\\Zachary\\Desktop\\TP3WebVanierZachary\\TP3VanierZachary(NG)\\test\\src\\app\\voyage-create\\voyage-create.component.ts","C:\\Users\\Zachary\\Desktop\\TP3WebVanierZachary\\TP3VanierZachary(NG)\\test\\src\\app\\voyage-create\\voyage-create.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { VoyageService } from '../voyage-service.service'; // Ensure you have a VoyageService\n\n@Component({\n  selector: 'app-voyage-create',\n  templateUrl: './voyage-create.component.html',\n  styleUrls: ['./voyage-create.component.css']\n})\nexport class VoyageCreateComponent {\n  imagePreview: string | ArrayBuffer | null = null;\n\n  constructor(private voyageService: VoyageService) {}\n\n  onSubmit(form: NgForm): void {\n    if (!form.valid) {\n      // Handle invalid form in the UI, perhaps by displaying an error message\n      return;\n    }\n\n    // Construct a voyage object (adjust fields as necessary for your data model)\n    const voyageData = new FormData();\n    voyageData.append('title', form.value.title);\n    voyageData.append('public', form.value.public as boolean ? 'true' : 'false');\n    if (this.imagePreview) {\n      voyageData.append('image', this.imagePreview);\n    }\n\n    // Call the service to send the data to your backend\n    this.voyageService.createVoyage(voyageData).subscribe({\n      next: (response) => {\n        // Handle successful response, such as navigating to a new route\n        // or updating a list of voyages displayed to the user\n      },\n      error: (error) => {\n        // Handle error response, such as displaying an error message\n        console.error('Failed to create voyage', error);\n      }\n    });\n\n    // Reset the form after submission\n    form.reset();\n    this.imagePreview = null;\n  }\n\n  onImagePicked(event: Event): void {\n    const element = event.target as HTMLInputElement;\n    const file = element.files?.item(0);\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.imagePreview = reader.result; // This should be the file, not the result\n      };\n      reader.onerror = (error) => {\n        // Provide user feedback about the file read error\n        console.error('Error occurred while reading the file', error);\n      };\n      reader.readAsDataURL(file); // Consider if you need to read as data URL or as a File\n    }\n  }\n}\n","<div class=\"container\">\n    <h2>Nouveau voyage</h2>\n    <form #f=\"ngForm\" (ngSubmit)=\"onSubmit(f)\">\n      <div class=\"form-group\">\n        <label for=\"voyageTitle\">Titre du voyage</label>\n        <input type=\"text\" class=\"form-control\" id=\"voyageTitle\" name=\"title\" ngModel required>\n      </div>\n      <div class=\"form-check\">\n        <input type=\"checkbox\" class=\"form-check-input\" id=\"voyagePublic\" name=\"public\" ngModel>\n        <label class=\"form-check-label\" for=\"voyagePublic\">Voyage public</label>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"voyageImage\">Télécharger une image</label>\n        <input type=\"file\" class=\"form-control-file\" id=\"voyageImage\" (change)=\"onImagePicked($event)\">\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Créer</button>\n    </form>\n  </div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}